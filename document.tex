%%% template.tex
%%%
%%% This LaTeX source document can be used as the basis for your technical
%%% paper or abstract. Regardless of the length of your document, the commands
%%% are all the same.
%%%
%%% The "\documentclass" command is the first command in your file. If you want to
%%% prepare a version of your article with line numbers - a "review" version -
%%% include the "review" parameter:
%%%    \documentclass[review]{acmsiggraph}
%%%

\documentclass[review]{acmsiggraph}

\usepackage{lineno}
\usepackage{float}
\usepackage{multirow}
\usepackage{array}
% \usepackage{units}
% \usepackage{color}

\usepackage{wrapfig}
\usepackage{tabulary}
\usepackage{amsmath} % assumes amsmath package installed
\usepackage{amssymb}  % assumes amsmath package installed
\usepackage{algorithm}
\usepackage{algorithmicx}
\usepackage[noend]{algpseudocode}



\algdef{SE}[DOWHILE]{Do}{doWhile}{\algorithmicdo}[1]{\algorithmicwhile\ #1}%


\newcommand{\todo}[1]{\textcolor{red}{TODO: #1}}

%%% Title of your article or abstract.

\title{Participatory Layout Design Fabrication with Natural Materials in Native Forms
}

\author{Hironori Yoshida\thanks{e-mail:hyoshida@hy-ma.com}   Takeo Igarashi\thanks{e-mail:takeo@acm.com}, Maria K Larsson
 \\www.hy-ma.com, the University of Tokyo
}



\pdfauthor{Hironori Yoshida}

%%% Used by the ``review'' variation; the online ID will be printed on
%%% every page of the content.

\TOGonlineid{0542}

% User-generated keywords.

\keywords{Fabrication, Collaborative Design, Human computation}

% With the "\setcopyright" command the appropriate rights management text will be added
% to your document.

%\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
\setcopyright{rightsretained}
%\setcopyright{usgov}
%\setcopyright{usgovmixed}
%\setcopyright{cagov}
%\setcopyright{cagovmixed}
%\setcopyright{rightsretained}

% The year of publication in the "\copyrightyear" command.

\copyrightyear{2016}

%%% Conference information, from the completed rights management form.
%%% The "\conferenceinfo" command has two parameters:
%%%    - conference name
%%%    - conference date and location
%%% The "\isbn" field includes the year and month after the article ISBN.

\conferenceinfo{SIGGRAPH 2016 Posters}{July 24-28, 2016, Anaheim, CA}
\isbn{978-1-4503-ABCD-E/16/07}
\doi{http://doi.acm.org/10.1145/9999997.9999999}

\begin{document}

%%% This is the ``teaser'' command, which puts an figure, centered, below
%%% the title and author information, and above the body of the content.

\teaser{
    \centerline{
       \includegraphics[height=0.225\paperheight]{images/fabrication/teaser1.png}
       \hspace{3mm}
         \includegraphics[height = 0.225\paperheight]{images/fabrication/teaser3.png}
 }
  \caption{Left: an overview of the workflow: 1. fix branches on plates. 2. scan the plates and upload the model. 3. play the game with scanned branches. 4. fabricate joineries by a CNC (Computer Numerical Control) router. Right top: branch layouts designed using the game. 6 and 7 were designed and fabricated by participants in the case study. Right bottom: the fabricated 2D fence (2000 $mm$ $\times$ 900 $mm$). Each pair of branches is connected with rigid lapped joint. }

  \label{fig:teaser}
}


\maketitle

\input{texts/abstract.tex}
\linenumbers

%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
% Please copy and paste the code instead of the example below.
%
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10010147.10010371.10010382</concept_id>
<concept_desc>Computing methodologies~Image manipulation</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10010147.10010371.10010382.10010236</concept_id>
<concept_desc>Computing methodologies~Computational photography</concept_desc>
<concept_significance>300</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Computing methodologies~Image manipulation}
\ccsdesc[300]{Computing methodologies~Computational photography}

\keywordlist

\conceptlist

\printcopyright

\input{texts/introduction.tex}
\input{texts/relatedwork.tex}
\input{texts/workflow.tex}
\input{texts/branchconnect.tex}
\input{texts/casestudy.tex}
\input{texts/conclusion.tex}

%\section*{Acknowledgments}
%We appreciate the public house for hosting the CNC router and providing participants for the user study.
%We thank to the film editor, Shin Yamane for shooting our video clips.
%We also thank to the developer of an online game \textit{2048}, Gabriele Cirulli and his contributors, for sharing source code in Github community.


\bibliographystyle{acmsiggraph}
\nocite{*}
\bibliography{references}



%\newpage

\appendix

%\section{Intersected Contour Detection }
% \label{sec:sidecut}
%
%  \begin{figure}[h]
%  	\begin{center}
%  		\includegraphics[width =0.48 \paperwidth]{images/system/intersection.png}
%  		\caption{An overview of intersected contour detection. We first detect 4 closest points and then define side lines and center lines. 1. We search the four corner points at the intersection from the branch A's point of view. 2. From the intersection of skeletons, the closest point on the contour of A is defined. 3. With the radius of the branch B, we look for the }
%  		\label{fig:intersection}
%  	\end{center}
%  \end{figure}

\section{Overview of the Game}


\label{sec:game_flow}
 \begin{figure}[h]
 	\begin{center}
 		\includegraphics[width = 0.35\paperwidth]{images/system/closestPointAlgorithm.pdf}
 		\caption{Left: an overview of the game system with 1. joint update 2. group update and 3. score calculation. This process is iteratively executed while a user is exploring layout by dragging a branch. The joint update process is further illustrated in the right, and group condition update is described in Algorithm \ref{al:connection}. }
 		\label{fig:system_flowchart}
 	\end{center}
 \end{figure}

 \section{Group Update Process}
 \label{sec:group}
 The group update process is described as follows.
 Each time the process is called, firstly it initializes a set of groups denoted as $\mathcal{G}$.
 Iterating $b_i \in \mathcal{B}$, the first group $g_0 \in \mathcal{G}$ is created and $g_0$ stores $b_0$.
 In the iteration, the process checks connections of a branch $b_i$ with all the existing groups $ g_j \in \mathcal{G}$.
 If $b_i$ is connected to $g_j$, $g_j$ is stored in a list of connected groups, denoted as $C_i$.
 After collecting all the connected groups with $b_i$, we evaluates $C_i$.
 If $C_i$ does not have any stored group, then a new group $g$ storing $b_i$ is created and added to $\mathcal{G}$.
 If $C_i$ is not empty, then it also creates a new group $g$, but puts all the groups $g_j \in C_i$ to $g$, then adds $g$ to $\mathcal{G}$.
 Finally groups $g_j \in C_i$ are removed from $\mathcal{G}$.
 Iterating all $b_i \in \mathcal{B}$, we acquire the updated group condition.

 \begin{algorithm}
   \caption{Group Condition Update Algorithm}
   \begin{algorithmic}[1]
     \Function{UpdateGroups}{$\mathcal{B}$}
     \State{ \textit{// initialize group condition}}
     \State{Reset all the groups $\mathcal{G}$ }
     \State{Create new group $g_0$}
     \State{$g_0$.adds $\left( b_0 \right) $}
     \If{$b_0$.contains$\left( t_i \in \mathcal{T} \right) $ }
       \State{$g_0$.adds$\left(t_i \right) $}
     \EndIf
     \State{$\mathcal{G}$.adds$\left( g_0 \right) $ }

     \State{ \textit{// iterate all branches and joints}}
     \For{each branch $b_i \in \mathcal{B}$ except $b_0$}
     \State{\textit{// initiate a list of connected group} $C_i$}
       \For{each group $g_j \in \mathcal{G}$}
           \If{ $g_j$.contains$ \left( b_i \right)$}
             \State{ $G^\prime_i$.add$\left( g_j \right) $}
           \EndIf
       \EndFor
       \State{ \textit{ // In case of the first group, create a new group }}
 	\If{ $C_i$.isEmpty}
 		\State{Create new group $g$}
 		\State{$g$.adds$\left(b_i \right) $}
 		\State{$\mathcal{G}$.adds$\left( g \right) $ }

  \State{ \textit{ // If the group doesn't belong to existing groups,}}
  \State{ \textit{ // create a new group }}

 	\Else
 		\State{Create new group $g^\prime$}
 		\State{$g^\prime$.adds$\left(b_i \right) $}
 		\For{each group $g_j \in  G^\prime_i$}
 			\For{each branch $b_k \in g_j$}
 				\If{$g^\prime$.contains$\left( b_k \right) =false$}
 						\State{$g^\prime$.adds$\left(b_k \right) $}
 				\EndIf
 			\EndFor
 		\EndFor
 		\For{each group $g_j \in  C_i$}
 			\State{$\mathcal{B}$.removes$\left(g_j \right) $}
 		\EndFor
 		\State{$\mathcal{G}$.adds$\left( g \right) $ }
 	\EndIf
 	\EndFor
   \EndFunction
   \end{algorithmic}
   \label{al:connection}
 \end{algorithm}

\end{document}
